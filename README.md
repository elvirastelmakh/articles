# Разворачивание проекта локально

1. Склонировать репозиторий: git clone git@github.com:elvirastelmakh/articles.git
2. Перейти в созданную директорию: `cd articles`
3. Запустить проект: ddev start
4. Зайти в web-контейнер: ddev ssh
5. Установить composer: composer install
6. Выполнить миграции: ./yii migrate
   На данном этапе происходит также наполнение БД данными для тестирования этого проекта (для этого создан отдельный файл миграции).
7. URL для просмотра в браузере (домашняя страничка не реализована, не предполагалась данным ТЗ): https://articles.ddev.site/

## В проекте реализовано:
1. База данных для хранения следующих сущностей:
    1. Автор статьи:
        1. ФИО
        2. Год рождения
        3. Биография
        Таблица "authors" с полями "id', "full_name", "birth_year", "biography".
        Составной уникальный индекс full_name + birth_year.
    2. Категория статьи (дерево неограниченной вложенности)
        1. Название
        2. Описание
        Таблица "categories" с полями "id', "parent_id", "title", "description".
        В parent_id хранится ссылка на категорию-родителя данной категории (для организации иерархии)
    3. Статья
        1. Название
        2. Картинка
        3. Анонс
        4. Текст
        5. Автор (может быть только один)
        6. Категории (может быть несколько)
        Таблица "articles" с полями "id', "title", "announcement", "text", "picture", "author_id".
        Создан внешний ключ для связи "author_id" с "id" в таблице "authors".
        Для связи статей со списком категорий создана таблица "article_categories" с полями "id", "article_id", "category_id".
        Создан уникальный индекс для обеспечения уникальности пары "article_id" + "category_id".

2. Запросы:
    1. Получить список статей с пагинацией (будет выдана 1-я страница по умолчанию, на странице 10 статей):
        https://articles.ddev.site/articles/list
    2. Получить конкретную страницу списка статей: https://articles.ddev.site/articles/list?page=2
    3. При получении списка статей, его можно отфильтровать по title (названию)), author (имени автора), 
       category (названию категории).
    Например, найти статьи, у которых в названии встречается слово "китай", и которые входят в категорию "живопись".
    https://articles.ddev.site/articles/list?filter[title]=китай&filter[category]=живопись
    Пример ответа: 
    [
        {
            "title": "Исследование вклада китайских художников, проживающих в России, в развитие китайского танца.",
            "author": "Чжан Жуй",
            "announcement": "Рассматриваются периоды межкультурного взаимодействия между Россией и Китайской Народной Республикой.",
            "text": "Китайские художники внесли значительный вклад в развитие китайского танца через создание уникальных хореографий, разработку танцевальных тем и мотивов, а также популяризацию национальных форм танцевального искусства.",
            "categories": "Живопись, Танец"
        },
        {
            "title": "Формирование взгляда: влияние реализма XIX века на китайские художественные концепции.",
            "author": "Су Вэйсай",
            "announcement": "В статье проанализированы основные концепции европейского реализма XIX века и их влияние на формирование системы восприятия искусства в Китае.",
            "text": "Процесс становления эстетических взглядов в Китае в XIX веке неразрывно связывался c усвоением зарубежных художественных достижений.",
            "categories": "Живопись"
        }
    ]

    Найти статьи, у которых в ФИО автора встречается словосочетание "Смирнов Олег" можно по адресу:
    https://articles.ddev.site/articles/list?filter[author]=Смирнов+Олег

    4. При указании категории при поиске статей учитывается иерархическая структура категорий. Например, при поиске по категории "наука" будут найдены статьи, категории которых входят на том или ином уровне в категорию наука (на примере данного проекта
    это будут статьи с категориями "Кораблестроение", "Транспорт", "Энергетика", "Всеобщая история" и другие        ). 

    Пример URL:
    https://articles.ddev.site/articles/list?filter[category]=наука

    Пример ответа:
   [
        {
            "title": "Анализ текущего состояния цифровизации электрических сетей и подстанций",
            "author": "Андреева Ольга Алексеевна",
            "announcement": "В данной статье приведены основные преимущества внедрения цифровых технологий на подстанции, рассмотрено текущее положение цифровизации подстанций и сетей в России и мире, сделаны краткие выводы.",
            "text": "Использование цифровых технологий приводит к значительным положительным эффектам во всех секторах экономики, поскольку ключевой характеристикой интеллектуальной сети является ее способность автоматически предотвращать (сокращать) перерывы в электроснабжения, что весьма важно для потребителя.",
            "categories": "Кораблестроение"
        },
        {
            "title": "Влияние культурных факторов на взаимодействие науки и общества: роль естественнонаучных музеев.",
            "author": "Смирнов Олег Аркадьевич",
            "announcement": "В статье отмечается, что музеи выполняют важную образовательную функцию, предоставляя возможности для обучения и популяризации науки.",
            "text": "Музеи имеют большое значение для ученых и исследователей, предоставляя доступ к  своим коллекциям и архивам.",
            "categories": "Наука, Культура и искусство"
        },
        {
            "title": "Искусство великого наследия.",
            "author": "Наимов СанджарТулкунович",
            "announcement": "В статье рассмотрены геометрические построения отдельных деталей, которые испокон веков существовало, и применялась на практике.",
            "text": "Миниатюра Востока, это уникальное явление в истории мирового искусства, привлекающее своим особым видением мира прекрасного, вобравшее художественный опыт многих поколений и народов Среднего и Ближнего Востока, Средней Азии.",
            "categories": "Всеобщая история, Живопись"
        },
        ...
    ]

    5. Получить статью по id: https://articles.ddev.site/articles/8?expand=author,categories
    Пример ответа:
        {
        "id": 8,
        "title": "Формирование взгляда: влияние реализма XIX века на китайские художественные концепции.",
        "announcement": "В статье проанализированы основные концепции европейского реализма XIX века и их влияние на формирование системы восприятия искусства в Китае.",
        "text": "Процесс становления эстетических взглядов в Китае в XIX веке неразрывно связывался c усвоением зарубежных художественных достижений.",
        "picture": "",
        "author": {
            "id": 8,
            "full_name": "Су Вэйсай",
            "birth_year": 1978,
            "biography": ""
        },
        "categories": [
            {
                "id": 11,
                "parent_id": 9,
                "title": "Живопись",
                "description": "Статьи о живописи"
            }
        ]
    }

    Поле picture имеет тип BLOB. Работа с ним не реализована пока в данном проекте. Как вариант можно было сделать строковый тип этого поля и записывать в него путь к файлу.

    6. Получить список категорий с пагинацией (будет выдана 1-я страница по умолчанию, на странице 10 категорий):
    https://articles.ddev.site/categories/list

    7. Получить конкретную страницу списка категорий: https://articles.ddev.site/categories/list?page=2
    8. При получении списка категорий, его можно отфильтровать по title (названию категории).
    Поиск происходит по вхождению (но без учета иерархии, просто поиск категории на соответствие названию).
    URL: https://articles.ddev.site/categories/list?filter[title]=культура
    Пример ответа:
    [
        {
            "title": "Культура и искусство",
            "description": "Статьи о музыке, живописи, архитектуре, кино, театре и т.д.",
            "parent": null
        }
    ]

    9. Получить категорию по id: https://articles.ddev.site/categories/12?expand=parent
    Пример ответа:
    {
        "id": 12,
        "parent_id": 9,
        "title": "Древние памятники",
        "description": "Статьи о древних памятниках и их сохранении",
        "parent": {
            "id": 9,
            "parent_id": null,
            "title": "Культура и искусство",
            "description": "Статьи о музыке, живописи, архитектуре, кино, театре и т.д."
        }
    }

    10. Получить список авторов с пагинацией (будет выдана 1-я страница по умолчанию, на странице 10 авторов):
    https://articles.ddev.site/authors/list

    11. Получить конкретную страницу списка авторов: https://articles.ddev.site/authors/list?page=2

    12. При получении списка авторов, его можно отфильтровать по full_name (ФИО), birth_year (год рождения), 
        biography (биографии).
    Например, найти авторов, у которых в full_name встречается "Андреева", и которые родились в 1964 году:
    https://articles.ddev.site/authors/list?filter[full_name]=Андреева&filter[birth_year]=1964

    Пример ответа:
    [
        {
            "id": 4,
            "full_name": "Андреева Ольга Алексеевна",
            "birth_year": 1964,
            "biography": "Магистрант, Самарский государственный технический университет, РФ, г. Самара."
        }
    ]

    Найти авторов, у которых в биографии встречается слово "университет" (полнотекстовый поиск при этом здесь не реализован):
    https://articles.ddev.site/authors/list?filter[biography]=университет

    13. Получить автора по id: https://articles.ddev.site/authors/1

    Пример ответа:
    {
        "id": 1,
        "full_name": "Мухина Милена Львовна",
        "birth_year": 1961,
        "biography": "Канд. техн. наук, доцент, доцент, Нижегородский государственный технический университет им. Р.Е. Алексеева."
    }
